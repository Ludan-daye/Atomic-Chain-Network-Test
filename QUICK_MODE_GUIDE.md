# 🚀 NetCrate Quick Mode 使用指南

## 概述

NetCrate Quick Mode 提供两种使用模式：

1. **零配置模式** - 完全自动化，无需任何参数
2. **半自动向导模式** - 提供交互式配置选择

## 零配置模式（默认）

最简单的使用方式，适合快速扫描：

```bash
# 完全自动化扫描
netcrate quick

# 跳过确认提示
netcrate quick --yes

# 仅显示将执行的操作，不实际扫描
netcrate quick --dry-run
```

### 默认配置
- **端口集**: top100（最常用的100个端口）
- **速率档位**: safe（100pps，200并发）
- **扫描方法**: ICMP + TCP 主机发现
- **网段选择**: 自动检测私网接口并计算目标网段

## 半自动向导模式

提供交互式配置选择，适合需要定制化扫描的场景：

```bash
# 启用交互式配置
netcrate quick --interactive
```

### 端口集选择

| 选项 | 端口集 | 描述 | 适用场景 |
|-----|-------|------|----------|
| 1 | top100 | 最常用100个端口 | 快速全面扫描（默认） |
| 2 | top1000 | 最常用1000个端口 | 详细全面扫描 |
| 3 | web | Web服务端口 | 专注Web应用扫描 |
| 4 | database | 数据库端口 | 数据库服务发现 |
| 5 | common | 通用服务端口 | 基础服务扫描 |

### 速率档位选择

| 选项 | 档位 | 配置 | 说明 |
|-----|------|------|------|
| 1 | safe | 100pps, 200并发 | 安全模式，对目标网络影响较小（默认） |
| 2 | fast | 400pps, 800并发 | 快速模式，扫描速度更快 |
| 3 | custom | 自定义参数 | 完全自定义速率和并发数 |

## 使用示例

### 示例1: 零配置快速扫描
```bash
$ netcrate quick
🚀 NetCrate Quick Mode
======================

[1/4] 🔍 自动检测网络接口...
✅ 自动选择接口: en0 (Ethernet/WiFi)
   IP地址: 192.168.1.100

[2/4] 🎯 计算目标网段...
✅ 目标网段: 192.168.1.0/24

[3/4] ⚙️ 配置确认
==================
📡 接口: en0 (Ethernet/WiFi)
📍 本机IP: 192.168.1.100
🎯 目标网段: 192.168.1.0/24
🔍 主机发现: ICMP + TCP (22,80,443)
📊 端口扫描: top100 (100 个最常用端口)
⚡ 速率档位: safe - 安全模式 (100 pps, 200 并发)

按 Enter 继续，输入 'q' 退出: [Enter]

[4/4] 🔍 执行扫描流水线...

🔍 阶段 1: 主机发现
==================
✅ 发现 5 个活跃主机 (耗时 45.2s)

🔍 阶段 2: 端口扫描
==================
✅ 扫描完成：发现 12 个开放端口 (耗时 38.7s)

🎉 扫描完成！
==============
运行ID: quick_1234567890
目标网段: 192.168.1.0/24
总耗时: 83.9 秒

📊 扫描结果
============
活跃主机: 5
开放端口: 12

🟢 活跃主机列表:
  • 192.168.1.1
  • 192.168.1.10
  • 192.168.1.20
  • 192.168.1.30
  • 192.168.1.100

🔧 发现的服务:
  • http: 3 个实例
  • ssh: 4 个实例
  • https: 2 个实例

⚠️ 关键端口 (需要注意):
  • 192.168.1.10:22 (ssh) - high 风险
  • 192.168.1.20:3306 (mysql) - medium 风险

💾 详细结果: netcrate output show --run quick_1234567890
```

### 示例2: 交互式Web服务扫描
```bash
$ netcrate quick --interactive
🚀 NetCrate Quick Mode
======================

[1/4] 🔍 自动检测网络接口...
✅ 自动选择接口: en0 (Ethernet/WiFi)
   IP地址: 192.168.1.100

[2/4] 🎯 计算目标网段...
✅ 目标网段: 192.168.1.0/24

[2.5/4] ⚙️ 扫描配置
================

📊 选择端口集:
  1. top100    - 最常用100个端口 (默认)
  2. top1000   - 最常用1000个端口
  3. web       - Web服务端口
  4. database  - 数据库端口
  5. common    - 通用服务端口
请选择 (1-5) [默认: 1]: 3
✅ 端口集: web

⚡ 选择速率档位:
  1. safe   - 安全模式 (100pps, 200并发) [默认]
  2. fast   - 快速模式 (400pps, 800并发)
  3. custom - 自定义参数
请选择 (1-3) [默认: 1]: 2
✅ 速率档位: fast

[3/4] ⚙️ 配置确认
==================
📡 接口: en0 (Ethernet/WiFi)
📍 本机IP: 192.168.1.100
🎯 目标网段: 192.168.1.0/24
🔍 主机发现: ICMP + TCP (22,80,443)
📊 端口扫描: web (8 个Web服务端口)
⚡ 速率档位: fast - 快速模式 (400 pps, 800 并发)

按 Enter 继续，输入 'q' 退出: [Enter]
...
```

## 结果管理

### 查看结果
```bash
# 查看最近一次扫描结果
netcrate output show --last

# 查看特定运行的结果
netcrate output show --run quick_1234567890

# 列出所有保存的扫描结果
netcrate output list

# 以JSON格式导出结果
netcrate output show --last --json
```

### 结果存储位置
- 扫描结果自动保存到 `~/.netcrate/runs/`
- 每次扫描都有唯一的运行ID
- 支持历史追溯和复盘分析

## 安全特性

### 私网保护
- 自动检测并仅允许扫描RFC 1918私网地址
- 阻止意外扫描公网设施
- 如需扫描公网，需使用 `--dangerous` 标志

### 速率限制
- 内置速率限制防止网络拥塞
- Safe模式确保对网络影响最小
- Custom模式允许精细控制

## 常见使用场景

### 1. 日常网络检查
```bash
netcrate quick --yes
```

### 2. 专项Web安全扫描
```bash
netcrate quick --interactive  # 选择web端口集
```

### 3. 快速网络盘点
```bash
netcrate quick --interactive  # 选择fast档位
```

### 4. 预览扫描计划
```bash
netcrate quick --dry-run --interactive
```

## 命令行标志参考

| 标志 | 描述 | 默认值 |
|------|------|--------|
| `--interactive` | 启用交互式配置选择 | false |
| `--dry-run` | 仅显示计划，不执行扫描 | false |
| `--yes` | 跳过所有确认提示 | false |
| `--dangerous` | 允许扫描非私网地址 | false |
| `--iface <name>` | 强制使用特定网络接口 | auto |

## 故障排除

### 没有发现活跃主机
- 检查网络连接
- 确认目标网段正确
- 尝试使用不同的速率档位

### 权限不足
- 某些功能可能需要管理员权限
- 使用 `sudo netcrate quick` 运行

### 扫描速度慢
- 使用 `--interactive` 选择 fast 档位
- 或者选择 custom 档位设置更高的速率

## 最佳实践

1. **首次使用**: 建议先用 `--dry-run` 查看执行计划
2. **生产环境**: 使用 safe 档位避免影响业务
3. **大网段扫描**: 分段扫描或使用 custom 档位调整参数
4. **定期巡检**: 使用 `--yes` 标志实现自动化扫描
5. **结果分析**: 利用 `output` 命令查看历史趋势

NetCrate Quick Mode 让网络安全扫描变得简单高效，无论是零配置的快速启动还是精细化的交互配置，都能满足不同场景的需求！